"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[557],{3173:function(t,a,l){var o=l(4373);const e=o.A.create({baseURL:"http://localhost:9091"});e.interceptors.request.use((t=>{const a=localStorage.getItem("jwt");return a&&(t.headers.Authorization=`Bearer ${a}`),t}),(t=>Promise.reject(t))),a.A=e},1557:function(t,a,l){l.r(a),l.d(a,{default:function(){return p}});var o=l(6768),e=l(4232);const s={class:"contentW"},n={class:"tbl"},d=["onClick"],r={class:"wd10"},c={class:"wd10"},u={key:0};function i(t,a,l,i,h,k){const m=(0,o.g2)("Pagination"),C=(0,o.g2)("ChatHistoryModal"),I=(0,o.g2)("ChatModal");return(0,o.uX)(),(0,o.CE)("div",s,[a[4]||(a[4]=(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:"tit"},"ë‚´ ì±„íŒ…"),(0,o.Lk)("li",{class:"navi"},[(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"í™ˆ"),(0,o.Lk)("li",null,"ë‚´ ì±„íŒ…")])])],-1)),(0,o.Lk)("div",null,[a[3]||(a[3]=(0,o.Lk)("h1",{class:"dpn"},"ë‚´ ì±„íŒ…",-1)),(0,o.Lk)("table",n,[a[2]||(a[2]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",{class:"wd6"},"rId"),(0,o.Lk)("td",{class:"wd12"},"ìƒì„±ì¼"),(0,o.Lk)("td",{class:"wd10"},"ë‹µë³€ì"),(0,o.Lk)("td",{class:"wd10"},"ë¬¸ì˜ì"),(0,o.Lk)("td",null,"ì±„íŒ…"),(0,o.Lk)("td",{class:"wd12"},"ë§ˆì§€ë§‰ ì±„íŒ…ì¼"),(0,o.Lk)("td",{class:"wd10"},"ìƒíƒœ(ëŒ€ê¸°/ì§„í–‰ì¤‘/ì™„ë£Œ)")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.chatrooms?.slice(i.pageStartIdx,i.pageStartIdx+i.ITEM_PER_PAGE),(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.chatroomId,onClick:a=>"02"===t.status?i.openChatModal(t.chatroomId):i.openChatHistoryModal(t.chatroomId)},[(0,o.Lk)("td",null,(0,e.v_)(t.chatroomId),1),(0,o.Lk)("td",null,(0,e.v_)(t.credt),1),(0,o.Lk)("td",r,(0,e.v_)(t.adm?.nick||""),1),(0,o.Lk)("td",c,(0,e.v_)(t.usr?.nick||""),1),(0,o.Lk)("td",null,[(0,o.eW)((0,e.v_)(t.lastContent)+" ",1),null!=i.unreadCounts[t.chatroomId]?((0,o.uX)(),(0,o.CE)("p",u," ( "+(0,e.v_)(i.unreadCounts[t.chatroomId])+" ) ",1)):(0,o.Q3)("",!0)]),(0,o.Lk)("td",null,(0,e.v_)(t.lastCredt),1),(0,o.Lk)("td",null,(0,e.v_)(t.status),1)],8,d)))),128))])]),i.chatrooms.length>0?((0,o.uX)(),(0,o.Wv)(m,(0,o.v6)({key:0,list:i.chatrooms},{ITEM_PER_PAGE:i.ITEM_PER_PAGE,PAGE_PER_SECTION:i.PAGE_PER_SECTION},{onChangePage:i.onChangePage}),null,16,["list","onChangePage"])):(0,o.Q3)("",!0)]),(0,o.bF)(C,{modalValue:i.isChatHistoryModalVisible,"onUpdate:modalValue":a[0]||(a[0]=t=>i.isChatHistoryModalVisible=t),chatroomId:i.chatroomId},null,8,["modalValue","chatroomId"]),(0,o.bF)(I,{modelValue:i.isModalVisible,"onUpdate:modelValue":a[1]||(a[1]=t=>i.isModalVisible=t),userId:i.userId,nick:i.nick,role:i.role,chatroomId:i.chatroomId},null,8,["modelValue","userId","nick","role","chatroomId"])])}var h=l(144),k=l(3173),m=l(124),C=l(2789),I=l(9383),L=l(5897),E={components:{ChatHistoryModal:m.A,ChatModal:C.A,Pagination:I.A},setup(){const t=(0,h.KR)(localStorage.getItem("adminId")),a=(0,h.KR)(localStorage.getItem("adminNick")),l=(0,h.KR)("ADM"),e=(0,L.L)(),s=(0,o.EW)((()=>e.chatList)),n=(0,o.EW)((()=>e.unreadCounts)),d=(0,h.KR)(""),r=(0,h.KR)(!1),c=(0,h.KR)(!1),u=(0,h.KR)(5),i=(0,h.KR)(5);let m=(0,h.KR)(1);const C=(0,o.EW)((()=>(m.value-1)*u.value)),I=t=>{m.value=t},E=async()=>{try{const a=await k.A.post("/api/admin/chat/mylist",{id:t.value});e.setChatList(a.data)}catch(a){console.error("Error fetching chat list:",a),console.log(a)}},g=t=>{d.value=t,r.value=!0},v=t=>{d.value=t,c.value=!0,e.markAsRead(t)},p=()=>{d.value=""};return(0,o.sV)((()=>{E()})),(0,o.wB)((()=>e.chatList),(t=>{console.log("ğŸ‘€ chatStore.chatList ë³€ê²½ë¨ (ë‚´ì±„íŒ…):",t)}),{deep:!0}),{userId:t,nick:a,role:l,chatrooms:s,unreadCounts:n,chatroomId:d,isChatHistoryModalVisible:r,isModalVisible:c,openChatHistoryModal:g,openChatModal:v,resetChatroomId:p,ITEM_PER_PAGE:u,PAGE_PER_SECTION:i,pageStartIdx:C,onChangePage:I,getMyChatroomList:E}}},g=l(1241);const v=(0,g.A)(E,[["render",i]]);var p=v}}]);
//# sourceMappingURL=557.394c969a.js.map