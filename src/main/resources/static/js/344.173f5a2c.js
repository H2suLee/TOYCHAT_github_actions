"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[344],{3173:function(a,e,t){var o=t(4373);const l=o.A.create({baseURL:"http://localhost:9091"});l.interceptors.request.use((a=>{const e=localStorage.getItem("jwt");return e&&(a.headers.Authorization=`Bearer ${e}`),a}),(a=>Promise.reject(a))),e.A=l},7344:function(a,e,t){t.r(e),t.d(e,{default:function(){return y}});var o=t(6768),l=t(4232),s=t(5130);const n={class:"contentW"},r={class:"tbl"},c=["onClick"],d=["onClick"];function u(a,e,t,u,i,m){const h=(0,o.g2)("Pagination"),v=(0,o.g2)("ChatHistoryModal"),g=(0,o.g2)("ChatManageModal");return(0,o.uX)(),(0,o.CE)("div",n,[e[5]||(e[5]=(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:"tit"},"채팅 관리"),(0,o.Lk)("li",{class:"navi"},[(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"홈"),(0,o.Lk)("li",null,"채팅 관리")])])],-1)),(0,o.Lk)("div",null,[e[4]||(e[4]=(0,o.Lk)("h1",{class:"dpn"},"채팅 관리",-1)),(0,o.Lk)("table",r,[e[3]||(e[3]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",{class:"wd6"},"rId"),(0,o.Lk)("td",{class:"wd12"},"생성일"),(0,o.Lk)("td",{class:"wd10"},"답변자"),(0,o.Lk)("td",{class:"wd10"},"문의자"),(0,o.Lk)("td",{class:"wd12"},"마지막 채팅일"),(0,o.Lk)("td",{class:"wd12"},"카테고리"),(0,o.Lk)("td",{class:"wd6"},"관리")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.chatrooms?.slice(u.pageStartIdx,u.pageStartIdx+u.ITEM_PER_PAGE),(a=>((0,o.uX)(),(0,o.CE)("tr",{key:a.chatroomId,onClick:e=>u.openChatHistoryModal(a.chatroomId)},[(0,o.Lk)("td",null,(0,l.v_)(a.chatroomId),1),(0,o.Lk)("td",null,(0,l.v_)(a.credt),1),(0,o.Lk)("td",null,(0,l.v_)(a.adm.nick),1),(0,o.Lk)("td",null,(0,l.v_)(a.usr.nick),1),(0,o.Lk)("td",null,(0,l.v_)(a.upddt),1),e[2]||(e[2]=(0,o.Lk)("td",null,"카테고리",-1)),(0,o.Lk)("td",null,[(0,o.Lk)("button",{onClick:(0,s.D$)((e=>u.openChatManageModal(a.chatroomId)),["stop"])}," 관리 ",8,d)])],8,c)))),128))])]),u.chatrooms.length>0?((0,o.uX)(),(0,o.Wv)(h,(0,o.v6)({key:0,list:u.chatrooms},{ITEM_PER_PAGE:u.ITEM_PER_PAGE,PAGE_PER_SECTION:u.PAGE_PER_SECTION},{onChangePage:u.onChangePage}),null,16,["list","onChangePage"])):(0,o.Q3)("",!0)]),(0,o.bF)(v,{modalValue:u.isChatHistoryModalVisible,"onUpdate:modalValue":e[0]||(e[0]=a=>u.isChatHistoryModalVisible=a),chatroomId:u.chatroomId,onResetChatroomId:u.resetChatroomId},null,8,["modalValue","chatroomId","onResetChatroomId"]),(0,o.bF)(g,{modalValue:u.isChatManageModalVisible,"onUpdate:modalValue":e[1]||(e[1]=a=>u.isChatManageModalVisible=a),chatroomId:u.chatroomId,onResetChatroomId:u.resetChatroomId},null,8,["modalValue","chatroomId","onResetChatroomId"])])}var i=t(144),m=t(3173),h=t(124);const v={key:0,class:"error-message"};function g(a,e,t,n,r,c){return n.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:e[7]||(e[7]=(0,s.D$)(((...a)=>n.close&&n.close(...a)),["self"]))},[(0,o.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:e[4]||(e[4]=(...a)=>n.startDrag&&n.startDrag(...a)),onMouseup:e[5]||(e[5]=(...a)=>n.stopDrag&&n.stopDrag(...a)),onMousemove:e[6]||(e[6]=(...a)=>n.drag&&n.drag(...a))},[(0,o.Lk)("button",{class:"modal-close",onClick:e[0]||(e[0]=(...a)=>n.close&&n.close(...a))},"×"),e[9]||(e[9]=(0,o.eW)(" 카테고리 : ")),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.category=a)},e[8]||(e[8]=[(0,o.Lk)("option",{value:"cate1"},"category1",-1),(0,o.Lk)("option",{value:"cate2"},"category2",-1),(0,o.Lk)("option",{value:"cate3"},"category3",-1)]),512),[[s.u1,n.category]]),e[10]||(e[10]=(0,o.eW)(" 메모 : ")),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.memo=a),rows:"4",cols:"50"},null,512),[[s.Jo,n.memo]]),n.errorMessage?((0,o.uX)(),(0,o.CE)("p",v,(0,l.v_)(n.errorMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:e[3]||(e[3]=(...a)=>n.save&&n.save(...a))},"저장")],544)])):(0,o.Q3)("",!0)}var k={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(a,{emit:e}){const t=(0,i.KR)(""),l=(0,i.KR)(""),s=(0,i.KR)(""),n=(0,o.EW)((()=>a.chatroomId)),r=(0,i.KR)(a.modalValue),c=(0,i.KR)(null);let d=(0,i.KR)(!1),u=0,h=0,v=0,g=0;const k=async()=>{try{const a=await m.A.post("/api/admin/chat/chatManageInfo",{chatroomId:n.value});t.value=a.data.category,l.value=a.data.memo}catch(a){console.error("Error fetching chat list:",a)}},p=()=>{if(C()&&confirm("저장하시겠습니까?")){m.A.post("api/admin/chat/saveChatManageInfo",{chatroomId:n.value,category:t.value,memo:l.value})}},C=()=>t.value?l.value&&l.value.trim()?(s.value="",!0):(s.value="메모를 입력해주세요.",!1):(s.value="카테고리를 선택해주세요.",!1),I=()=>{n.value="",t.value="",l.value="",e("update:modalValue",!1),e("reset-chatroom-id")},L=a=>{d.value=!0,u=a.clientX,h=a.clientY;const e=c.value.getBoundingClientRect();v=e.left,g=e.top},M=()=>{d.value=!1},E=a=>{if(!d.value)return;const e=a.clientX-u,t=a.clientY-h;c.value.style.left=`${v+e}px`,c.value.style.top=`${g+t}px`};return(0,o.wB)((()=>a.modalValue),(a=>{r.value=a})),(0,o.wB)((()=>n.value),(a=>{a&&k()})),{category:t,memo:l,errorMessage:s,chatroomId:n,visible:r,close:I,modalContent:c,startDrag:L,stopDrag:M,drag:E,save:p}}},p=t(1241);const C=(0,p.A)(k,[["render",g],["__scopeId","data-v-02cd7126"]]);var I=C,L=t(9383),M={components:{ChatHistoryModal:h.A,ChatManageModal:I,Pagination:L.A},setup(){const a=(0,i.KR)(localStorage.getItem("adminId")),e=(0,i.KR)(localStorage.getItem("adminNick")),t=(0,i.KR)([]),l=(0,i.KR)(""),s=(0,i.KR)(!1),n=(0,i.KR)(!1),r=(0,i.KR)(5),c=(0,i.KR)(5);let d=(0,i.KR)(1);const u=(0,o.EW)((()=>(d.value-1)*r.value)),h=a=>{d.value=a},v=async()=>{try{const e=await m.A.post("/api/admin/chat/mnglist",{id:a.value});t.value=e.data}catch(e){console.error("Error fetching chat list:",e)}},g=a=>{console.log("id: ",a),l.value=a,s.value=!0},k=a=>{l.value=a,n.value=!0},p=()=>{l.value=""};return(0,o.sV)((()=>{v()})),{userId:a,nick:e,chatrooms:t,chatroomId:l,isChatHistoryModalVisible:s,isChatManageModalVisible:n,openChatHistoryModal:g,openChatManageModal:k,resetChatroomId:p,ITEM_PER_PAGE:r,PAGE_PER_SECTION:c,pageStartIdx:u,onChangePage:h}}};const E=(0,p.A)(M,[["render",u]]);var y=E}}]);
//# sourceMappingURL=344.173f5a2c.js.map